# Code generated by kickr; DO NOT EDIT.

---
netlify:
  stage: deploy
  image: docker.io/library/node:24.12.0-alpine
  environment:
    name: $ENV
    action: start
  dependencies:
    - hugo-build
  rules:
    - if: '$CI_PIPELINE_SOURCE == "schedule"'
      when: never
    - if: $CI_COMMIT_REF_NAME == $CI_DEFAULT_BRANCH
      variables:
        ARGS: --prod
        ENV: production
    - variables:
        ARGS: --alias=$BRANCH_SHA
        ENV: review/$CI_COMMIT_REF_NAME
      when: manual
      allow_failure: true
  before_script:
    - npm install -g netlify-cli
  script:
    - netlify deploy --site "$NETLIFY_SITE_ID" --auth "$NETLIFY_AUTH_TOKEN" --dir "$BUILD_DIR" $ARGS
